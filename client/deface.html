<head>
  <title>Defacebook</title>
  <script src="fabric.js"></script>
</head>

<body>
{{renderPage}}
</body>
<template name="main">
	<div class="container-fluid">
		{{#unless image}}
			{{>hero_menu}}
		{{/unless}}
		{{#if image}}
			<div class="row-fluid">
				<div class="span2">
					{{> menu}}
					{{> share}}
				</div>
				<div class="offset1 span6">
					{{#constant}}
						{{> canvas}}
					{{/constant}}
				</div>
				<div class="span3">
					{{> draw_menu}}
					{{> cats}}
				</div>
	  	</div>
  	{{/if}}
	</div>
</template>

<template name="hero_menu">
	<div class="hero-unit well">
		<h1 class="text-center">Who do you want to deface?</h1>
		<h3 class="text-center">Place a url to any jpg and get to work.</h3>
		<div class="row-fluid">
			<input class="url span8 offset2" type="text">
		</div>
		<div class="row-fluid">
			<button class="offset5 btn-primary btn-large deface" type="button">Deface!</button>
		</div>
	</div>
</template>

<template name="menu">
	<div class="row-fluid drop50 deface_menu">
		<input class="span12 drop10"  id="url" type="text" placeholder="Input Image URL" >
		<button class="btn-primary deface" type="button">Deface!</button>
	</div>
</template>

<template name="share">
	<div class="row-fluid">
		{{#unless share_pressed}}
			<button class="btn-large btn-primary share offset2 drop50">Share</button>
		{{/unless}}
		{{#if share_pressed}}
			<h5>Your image, generously hosted by imgur: </h5>
			<input type="text" class="span12 drop10" value={{url}}>
		{{/if}}
	</div>
</template>

<template name="draw_menu">
	<div class="row-fluid offset2 draw_menu">
		<h3>Free Drawing</h3>
		<button class="{{draw_mode}}" type="button">Draw Mode</button>
		{{#if status}}
			<div class="row-fluid drop10">
				<div class="btn-group">
					<a class="btn dropdown-toggle btn-info" data-toggle="dropdown" href="#">
						Colors
						<span class="caret"></span>
					</a>
					<ul class="dropdown-menu">
						<li><a href='#' class="color">Red</a></li>
						<li><a href='#' class="color">Yellow</a></li>
						<li><a href='#' class="color">Green</a></li>
						<li><a href='#' class="color">Blue</a></li>
						<li><a href='#' class="color">Black</a></li>
						<li><a href='#' class="color">Grey</a></li>
					</ul>
				</div>
			</div>
			<div class="row-fluid">
				<label class="label drop10 offset3">Line Width</label>
				<input class="line_width drop10" type="range" min="1" max="100">
			</div>
			{{/if}}
		</div>
	</div>
</template>

<template name="cats">
	<div class="row-fluid offset2">
		<h3>Add some cats</h3>
			<div class="btn-group drop10">
				<a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
					Cats
					<span class="caret"></span>
				</a>
				<ul class="dropdown-menu">
					<li><a href='#' class="octocat">Octocat</a></li>
					<li><a href='#' class="black_cat">Black Cat</a></li>
				</ul>
			</div>
		</h3>
	</div>
</template>

<template name="canvas">
	<div class="row-fluid">
		<h1 class="text-center">Deface them!</h1>
		<div class="row-fluid canvas">
		  <canvas id="c"></canvas>
			{{#if image}}
			  {{image_to_canvas}}
			{{/if}}
		</div>
	</div>
</template>

<template name="tests">
	<div>
		{{> mochaTestReport}}
	</div>
</template>